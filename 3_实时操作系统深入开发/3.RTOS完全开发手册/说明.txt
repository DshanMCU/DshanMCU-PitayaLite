移植部分基于STM32，供参考